---
- name: Clone Tiny Tiny RSS repository
  git:
    dest: /home/{{ host_remote_user }}/ttrss
    repo: https://tt-rss.org/git/tt-rss.git
    accept_hostkey: yes
    force: yes
  become: false

- name: Configure TTRSS nginx server
  template:
    src: nginx_server.j2
    dest: /etc/nginx/sites-available/{{ website_url }}
  notify: Restart nginx

- name: Enable TTRSS nginx server
  file:
    src: /etc/nginx/sites-available/{{ website_url }}
    dest: /etc/nginx/sites-enabled/{{ website_url }}
    state: link
  notify: Restart nginx
